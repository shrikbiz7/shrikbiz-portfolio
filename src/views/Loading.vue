<template>
    <div class="container" align="center" justify="center">
        <svg viewBox="75.899 6.1413 80 80" width="500" height="500">
            <defs>
                <path
                    id="cc"
                    d="m 105.66043,42.217605 -0.46942,0.05354 m -0.10658,1.400696 -1.11814,0.536451 m 0.77115,1.091386 -1.73252,0.986926 m 1.77279,-0.04996 -2.6387,2.298105 m 2.7095,-1.260018 -3.34828,3.74857 m 3.45155,-2.676132 -3.72583,5.275265 m 3.96835,-4.3994 -3.90679,6.941239 m 4.1569,-6.332562 -3.85872,8.780829 m 4.33787,-7.99851 -3.93665,10.349452 m 4.30898,-9.3362 -3.47839,11.866413 m 4.01674,-10.815065 -3.17472,12.94456 m 4.1176,-12.015406 -2.8424,14.190611 m 3.75284,-13.295827 -2.36707,15.106508 m 3.24694,-14.31281 -1.3612,16.171125 m 2.77731,-15.429095 -0.98512,17.050765 m 2.43935,-16.474739 -0.44485,18.03532 m 2.23492,-17.51663 -5e-5,18.85008 m 1.69482,-18.687464 0.5171,19.652632 m 1.28421,-19.348413 1.36655,20.158898 m 1.1085,-20.22237 2.2521,20.752212 m 0.17124,-20.849338 3.65828,20.995372 m -1.18901,-21.397984 4.7053,20.741497 m -2.31713,-21.619056 5.85488,20.206919 m -3.55576,-21.276081 6.71302,19.947679 m -4.41394,-21.01683 7.22554,18.544228 m -5.22653,-20.015822 8.19007,17.61187 m -6.36692,-19.245923 8.7229,16.577906 m -6.91653,-18.606367 8.68118,15.63308 m -7.4941,-17.490032 9.31211,14.136793 m -7.93076,-16.177312 9.08112,13.114008 m -8.0709,-15.401383 9.21042,11.888769 m -8.4782,-14.373096 9.25479,11.157395 m -8.74561,-13.389745 9.20083,10.308053 m -8.92655,-12.907196 8.82662,9.36162 m -8.81951,-11.968348 8.44479,8.682359 m -8.84205,-11.340527 8.23414,7.778328 m -8.77172,-10.487757 7.86971,7.295343 m -9.19542,-10.547042 8.28536,7.637995 m -9.85393,-10.660254 7.83721,6.774486 m -10.15072,-10.048648 7.35105,5.870751 m-10.5 -9.5 0 0"
                ></path>
            </defs>
            <g>
                <use href="#cc"></use>
                <use transform="rotate(120,115.89903,46.141277)" href="#cc"></use>
                <use transform="rotate(240,115.89903,46.141277)" href="#cc"></use>
            </g>
        </svg>
        <h2>Loading...</h2>
        <h1 style="transition: all 1s ease">{{ percent }} %</h1>
    </div>
</template>

<script lang="ts">
import vue from 'vue';
import { Component, Emit, Prop } from 'vue-property-decorator';

@Component
export default class Loading extends vue {
    @Prop() isDone!: any;
    percent: number = 0;
    timer: any;
    t2: any;
    counter = 0;
    @Emit('isDone')
    done() {}

    mounted() {
        this.timer = setInterval(this.onTick, 10);
        this.t2 = setInterval(() => this.counter++, 1);
    }
    onTick() {
        this.percent++;
        if (this.percent === 30) {
            clearInterval(this.timer);
            this.timer = setInterval(this.onTick, 500);
        }
        if (this.percent === 34) {
            clearInterval(this.timer);
            this.timer = setInterval(this.onTick, 100);
        }
        if (this.percent === 42) {
            clearInterval(this.timer);
            this.timer = setInterval(this.onTick, 5);
        }
        if (this.percent === 99) {
            clearInterval(this.timer);
            this.timer = setInterval(this.onTick, 1000);
        }
        if (this.percent === 100) {
            clearInterval(this.timer);
            clearInterval(this.t2);
            this.timer = null;
            this.t2 = null;
            setTimeout(() => this.done(), 500);
        }
    }
}
</script>
<style lang="scss" scoped>
.container {
    height: calc(100vh - 56.8px);
    width: 100%;
}
body {
    display: grid;
    margin: 0;
    place-items: center;
    font-family: 'Work Sans', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}
h3 {
    position: fixed;
    top: 50px;
    color: #6b5151;
}

svg {
    margin: 0 auto;
}

#cc {
    fill: none;

    stroke-width: 0.25;
    stroke-linejoin: round;
    stroke-linecap: round;
    animation: cc 0.5s linear 9 forwards;
}
g {
    stroke: #cb6bff;
    animation: colors 20s linear 9 forwards;
}
@keyframes cc {
    0% {
        d: path(
            'm 105.66043,42.217605 -0.46942,0.05354 m -0.10658,1.400696 -1.11814,0.536451 m 0.77115,1.091386 -1.73252,0.986926 m 1.77279,-0.04996 -2.6387,2.298105 m 2.7095,-1.260018 -3.34828,3.74857 m 3.45155,-2.676132 -3.72583,5.275265 m 3.96835,-4.3994 -3.90679,6.941239 m 4.1569,-6.332562 -3.85872,8.780829 m 4.33787,-7.99851 -3.93665,10.349452 m 4.30898,-9.3362 -3.47839,11.866413 m 4.01674,-10.815065 -3.17472,12.94456 m 4.1176,-12.015406 -2.8424,14.190611 m 3.75284,-13.295827 -2.36707,15.106508 m 3.24694,-14.31281 -1.3612,16.171125 m 2.77731,-15.429095 -0.98512,17.050765 m 2.43935,-16.474739 -0.44485,18.03532 m 2.23492,-17.51663 -5e-5,18.85008 m 1.69482,-18.687464 0.5171,19.652632 m 1.28421,-19.348413 1.36655,20.158898 m 1.1085,-20.22237 2.2521,20.752212 m 0.17124,-20.849338 3.65828,20.995372 m -1.18901,-21.397984 4.7053,20.741497 m -2.31713,-21.619056 5.85488,20.206919 m -3.55576,-21.276081 6.71302,19.947679 m -4.41394,-21.01683 7.22554,18.544228 m -5.22653,-20.015822 8.19007,17.61187 m -6.36692,-19.245923 8.7229,16.577906 m -6.91653,-18.606367 8.68118,15.63308 m -7.4941,-17.490032 9.31211,14.136793 m -7.93076,-16.177312 9.08112,13.114008 m -8.0709,-15.401383 9.21042,11.888769 m -8.4782,-14.373096 9.25479,11.157395 m -8.74561,-13.389745 9.20083,10.308053 m -8.92655,-12.907196 8.82662,9.36162 m -8.81951,-11.968348 8.44479,8.682359 m -8.84205,-11.340527 8.23414,7.778328 m -8.77172,-10.487757 7.86971,7.295343 m -9.19542,-10.547042 8.28536,7.637995 m -9.85393,-10.660254 7.83721,6.774486 m -10.15072,-10.048648 7.35105,5.870751 m-10.5 -9.5 0 0'
        );
    }
    100% {
        d: path(
            'm 106.37003,40.767157 -0.43318,-0.04575 m -0.27642,1.496198 -0.46942,0.05354 m -0.10658,1.400696 -1.11814,0.536451 m 0.77115,1.091386 -1.73252,0.986926 m 1.77279,-0.04996 -2.6387,2.298105 m 2.7095,-1.260018 -3.34828,3.74857 m 3.45155,-2.676132 -3.72583,5.275265 m 3.96835,-4.3994 -3.90679,6.941239 m 4.1569,-6.332562 -3.85872,8.780829 m 4.33787,-7.99851 -3.93665,10.349452 m 4.30898,-9.3362 -3.47839,11.866413 m 4.01674,-10.815065 -3.17472,12.94456 m 4.1176,-12.015406 -2.8424,14.190611 m 3.75284,-13.295827 -2.36707,15.106508 m 3.24694,-14.31281 -1.3612,16.171125 m 2.77731,-15.429095 -0.98512,17.050765 m 2.43935,-16.474739 -0.44485,18.03532 m 2.23492,-17.51663 -5e-5,18.85008 m 1.69482,-18.687464 0.5171,19.652632 m 1.28421,-19.348413 1.36655,20.158898 m 1.1085,-20.22237 2.2521,20.752212 m 0.17124,-20.849338 3.65828,20.995372 m -1.18901,-21.397984 4.7053,20.741497 m -2.31713,-21.619056 5.85488,20.206919 m -3.55576,-21.276081 6.71302,19.947679 m -4.41394,-21.01683 7.22554,18.544228 m -5.22653,-20.015822 8.19007,17.61187 m -6.36692,-19.245923 8.7229,16.577906 m -6.91653,-18.606367 8.68118,15.63308 m -7.4941,-17.490032 9.31211,14.136793 m -7.93076,-16.177312 9.08112,13.114008 m -8.0709,-15.401383 9.21042,11.888769 m -8.4782,-14.373096 9.25479,11.157395 m -8.74561,-13.389745 9.20083,10.308053 m -8.92655,-12.907196 8.82662,9.36162 m -8.81951,-11.968348 8.44479,8.682359 m -8.84205,-11.340527 8.23414,7.778328 m -8.77172,-10.487757 7.86971,7.295343 m -9.19542,-10.547042 8.28536,7.637995 m -9.85393,-10.660254 7.83721,6.774486 m -10.15072,-10.048648 7.35105,5.870751'
        );
    }
}

@keyframes colors {
    0% {
        stroke: #cb6bff;
    }
    33% {
        stroke: #ffb36b;
    }
    66% {
        stroke: #41faf4;
    }
    100% {
        stroke: #cb6bff;
    }
}
</style>
